!function e(t,n,o){function i(s,r){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!r&&c)return c(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){var o=window.location.protocol+"//"+window.location.host+"/";"w.yuema.us"===window.location.hostname&&(o=window.location.protocol+"//www.yuema.us/");var i={loginApi:o+"open-api/login",registApi:o+"open-api/simple-regist",perfectApi:o+"action/user/update",provincesListApi:o+"open-api/query/provinces-list",citiesListApi:o+"open-api/query/cities-list",addressesListApi:o+"open-api/query/addresses-list",postDatingApi:o+"action/dating/post",requestDatingApi:o+"action/dating/request",acceptDatingApi:o+"action/dating/accept",listApi:o+"open-api/query/dating/dating-list",profileApi:o+"open-api/query/home-info",myRequestApi:o+"action/query/dating/my-request-dating-list"};t.exports=i},{}],2:[function(e,t,n){var o={getUrlParam:function(e){var t=new RegExp("[?|&]"+e+"=([^&]+)"),n=location.search.match(t);return n&&n[1]},stopEventTap:function(){var e=$('<div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 99999; "></div>');$("body").append(e),setTimeout(function(){e.remove()},500)},formatDate:function(e){"string"==typeof e&&(e=this.strToDate(e));var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return 10>n&&(n="0"+n),10>o&&(o="0"+o),t+"-"+n+"-"+o},strToDate:function(e){var t=e.replace(/-/g,"/");return new Date(t)},hideKeyboard:function(){var e=$('<a style="width: 0;height: 0;font-size: 0;display: block"></a>');$("body").append(e),e.focus(),setTimeout(function(){e.remove()},0)},getNetworkState:function(){var e=150,t=!1;if(window.performance){var n=window.performance.timing,o=n.responseEnd-n.domainLookupStart;t=o>e?!1:!0}return t},isIOS:function(){var e=ua.match(/(iPad).*OS\s([\d_]+)/),t=ua.match(/(iPod)(.*OS\s([\d_]+))?/),n=!e&&ua.match(/(iPhone\sOS)\s([\d_]+)/);return e||n||t?!0:!1},isAndroid:function(){return ua.indexOf("Android")>-1},isWeixin:function(){return ua.indexOf("MicroMessenger")>-1},getCookie:function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);return null!=n?decodeURI(n[2]):""},isLogin:function(){var e=this,t=e.getCookie("logined");return""!==t?!0:!1},template:function(e,t){function n(e){if(!e)return"";var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return(""+e).replace(/[&<>"']/g,function(e){return t[e]})}var o,i={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},a=/'|\\|\r|\n|\t|\u2028|\u2029/g,s=/<%-([\s\S]+?)%>|<%=([\s\S]+?)%>|<%([\s\S]+?)%>|$/g,r=0,c="__p+='";e.replace(s,function(t,o,s,d,l){return c+=e.slice(r,l).replace(a,function(e){return"\\"+i[e]}),o&&(c+="'+\n((__t=("+o+"))==null?'':"+n.name+"(__t))+\n'"),s&&(c+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),d&&(c+="';\n"+d+"\n__p+='"),r=l+t.length,t}),c+="';\n",c="with(obj||{}){\n"+c+"}\n",c=n.toString()+"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{o=new Function("obj",c)}catch(d){throw d.source=c,d}if(t)return o(t);var l=function(e){return o(e)};return l.source="function(obj){\n"+c+"}",l}};t.exports=o},{}],3:[function(e,t,n){var o=function(e){1==e.isRedirect&&setTimeout(function(){window.location.href=e.redirectURL},2e3)};t.exports={post:function(e,t,n,i){$.ajax({url:e,data:t,type:"post",dataType:"json",success:function(e){o(e),"SUCCESS"===e.resultCode?n(e):i(e)},error:function(e){var t=(e.status||500,"对不起，服务器正在维护，请稍后再试...");switch(e.status){case 404:t="对不起，你访问的接口不存在...";break;case 403:t="对不起，你没有权限访问该接口...";break;case 500:t="对不起，正在进行服务器维护，请稍后再来...";break;case 502:t="对不起，你访问的接口程序出错...";break;case 503:t="对不起，你访问的接口后端异常...";break;default:t="对不起，服务器正在维护，请稍后再试..."}var e={isRedirect:!1,result:{},resultCode:"SERVER ERROR",resultMsg:t};i(e)}})},get:function(e,t,n,i){$.ajax({url:e,data:t,type:"get",dataType:"json",success:function(e){o(e),"SUCCESS"===e.resultCode?n(e):i(e)},error:function(e){var t=(e.status||500,"对不起，服务器正在维护，请稍后再试...");switch(e.status){case 404:t="对不起，你访问的接口不存在...";break;case 403:t="对不起，你没有权限访问该接口...";break;case 500:t="对不起，正在进行服务器维护，请稍后再来...";break;case 502:t="对不起，你访问的接口程序出错...";break;case 503:t="对不起，你访问的接口后端异常...";break;default:t="对不起，服务器正在维护，请稍后再试..."}var e={isRedirect:!1,result:{},resultCode:"ERROR",resultMsg:t};i(e)}})}}},{}],4:[function(e,t,n){t.exports={hide:function(){$(".preloader-indicator-overlay, .preloader-indicator-modal, .preloader-label").remove()},show:function(e){var t="数据加载中...";if("object"==typeof e){t=e.msg||t;var n=$(e.renderTo),o=$('<div class="preloader-label"></div>'),i=$('<span class="preloader"></span>'),a=$('<span class="msg">'+t+"</span>");i.appendTo(o),a.appendTo(o),0===n.find(".preloader-label").length&&o.appendTo(n);var s=parseInt(a.width());o.css("width",s+25+1+"px")}else{t=e||t;var r=$('<div class="preloader-indicator-overlay"></div>'),c=$('<div class="preloader-indicator-modal"></div>'),i=$('<span class="preloader preloader-white"></span>'),a=$('<span class="msg">'+t+"</span>");i.appendTo(c),a.appendTo(c),r.appendTo($("body")),c.appendTo($("body"));var s=parseInt(c.width())/2,d=parseInt(c.height())/2;i.css("marginLeft",s-25+"px"),c.css({marginLeft:"-"+s+"px",marginTop:"-"+d+"px"})}}}},{}],5:[function(e,t,n){var o=$("body"),i=$('<div class="dialog-overlay"></div>'),a=$('<div class="dialog"></div>');t.exports={_initModal:function(){i=$('<div class="dialog-overlay"></div>'),a=$('<div class="dialog dialog-no-buttons"></div>'),o.append(i),o.append(a)},_hide:function(){a.addClass("dialog-out"),i.removeClass("dialog-overlay-visible"),setTimeout(function(){i.remove(),a.remove()},200)},_show:function(){i.addClass("dialog-overlay-visible"),a.addClass("dialog-in")},_position:function(){var e=parseInt(a.height())/2;a.css("marginTop","-"+e+"px")},show:function(e){var t=this,n=$('<div class="dialog-inner"></div>');t._initModal();var o=e.text||"",i=e.title||"";msgType=e.type||"success",callback=e.callback||null,"success"===msgType&&""===i&&(i="成功"),"error"===msgType&&""===i&&(i="失败");var s=$('<div class="iconfont icon-'+msgType+'"></div>'),r=$('<div class="dialog-title">'+i+"</div>"),c=$('<div class="dialog-text">'+o+"</div>");n.append(s),n.append(r),n.append(c),a.append(n),setTimeout(function(){t._hide(),callback&&callback()},2e3),t._position(),t._show()}}},{}],6:[function(e,t,n){$(function(){var t=e("../../common/utils"),n=(e("../../common/apimap"),e("../../components/tips")),o=(e("../../components/ajax"),e("../../components/loading/loading"),t.getUrlParam("uid")||""),i=t.getUrlParam("did")||"",a={socket:null,init:function(){if(!t.isLogin())return window.location.href="./login.html",!1;var e=$(window).height()-50;$(".chat-messages").height(e),"http:"==window.location.protocol?a.connect("ws://"+window.location.host+"/websocket/chat/"+i+"/"+o):a.connect("wss://"+window.location.host+"/websocket/chat/"+i+"/"+o)},connect:function(e){var t=this;if("WebSocket"in window)a.socket=new WebSocket(e);else{if(!("MozWebSocket"in window))return void n.show({type:"error",title:"Error: WebSocket is not supported by this browser."});a.socket=new MozWebSocket(e)}a.socket.onopen=function(){t.initEvent()},a.socket.onclose=function(){document.getElementById("message").onkeydown=null,n.show({type:"error",title:"Info: WebSocket closed."})},a.socket.onmessage=function(e){t.render(e.data)}},sendMessage:function(){var e=$.trim($("#message").val()),t={message:e,userId:o,datingId:i};if(e&&o&&i){a.socket.send(JSON.stringify(t));var n='<li class="chat-message chat-message-self"><div class="chat-message-bubble" style="transform: translate3d(0px, 0px, 0px); opacity: 1;">'+e+"</div></li>";$(".chat-messages-list").append(n),$("#message").val("")}},render:function(e){var t='<li class="chat-message chat-message-friend"><div class="chat-message-bubble">'+e+"</div></li>";$(".chat-messages-list").append(t)},initEvent:function(){document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("noscript"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])},!1),document.getElementById("message").onkeydown=function(e){13==e.keyCode&&a.sendMessage()},$(document).on("tap","#sendBtn",function(){a.sendMessage()})}};a.init()})},{"../../common/apimap":1,"../../common/utils":2,"../../components/ajax":3,"../../components/loading/loading":4,"../../components/tips":5}]},{},[6]);